{"dependencies":[{"name":"./ascending.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"xtKL/S7sK97/7tdhDf+yd4WGPfU=","exportNames":["*"],"imports":1}},{"name":"./sort.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":59,"index":99}}],"key":"ro8tJYy4r/rYT4XbEZc7ooHI910=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return rank;\n    }\n  });\n  var _ascendingJs = require(_dependencyMap[0], \"./ascending.js\");\n  var ascending = _interopDefault(_ascendingJs);\n  var _sortJs = require(_dependencyMap[1], \"./sort.js\");\n  function rank(values) {\n    var valueof = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ascending.default;\n    if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n    var V = Array.from(values);\n    var R = new Float64Array(V.length);\n    if (valueof.length !== 2) V = V.map(valueof), valueof = ascending.default;\n    var compareIndex = (i, j) => valueof(V[i], V[j]);\n    var k, r;\n    values = Uint32Array.from(V, (_, i) => i);\n    // Risky chaining due to Safari 14 https://github.com/d3/d3-array/issues/123\n    values.sort(valueof === ascending.default ? (i, j) => (0, _sortJs.ascendingDefined)(V[i], V[j]) : (0, _sortJs.compareDefined)(compareIndex));\n    values.forEach((j, i) => {\n      var c = compareIndex(j, k === undefined ? j : k);\n      if (c >= 0) {\n        if (k === undefined || c > 0) k = j, r = i;\n        R[j] = r;\n      } else {\n        R[j] = NaN;\n      }\n    });\n    return R;\n  }\n});","lineCount":43,"map":[[12,2,4,15,"Object"],[12,8,4,15],[12,9,4,15,"defineProperty"],[12,23,4,15],[12,24,4,15,"exports"],[12,31,4,15],[13,4,4,15,"enumerable"],[13,14,4,15],[14,4,4,15,"get"],[14,7,4,15],[14,18,4,15,"get"],[14,19,4,15],[15,6,4,15],[15,13,4,15,"rank"],[15,17,4,15],[16,4,4,15],[17,2,4,15],[18,2,1,0],[18,6,1,0,"_ascendingJs"],[18,18,1,0],[18,21,1,0,"require"],[18,28,1,0],[18,29,1,0,"_dependencyMap"],[18,43,1,0],[19,2,1,0],[19,6,1,0,"ascending"],[19,15,1,0],[19,18,1,0,"_interopDefault"],[19,33,1,0],[19,34,1,0,"_ascendingJs"],[19,46,1,0],[20,2,2,0],[20,6,2,0,"_sortJs"],[20,13,2,0],[20,16,2,0,"require"],[20,23,2,0],[20,24,2,0,"_dependencyMap"],[20,38,2,0],[21,2,4,15],[21,11,4,24,"rank"],[21,15,4,28,"rank"],[21,16,4,29,"values"],[21,22,4,35],[21,24,4,58],[22,4,4,58],[22,8,4,37,"valueof"],[22,15,4,44],[22,18,4,44,"arguments"],[22,27,4,44],[22,28,4,44,"length"],[22,34,4,44],[22,42,4,44,"arguments"],[22,51,4,44],[22,59,4,44,"undefined"],[22,68,4,44],[22,71,4,44,"arguments"],[22,80,4,44],[22,86,4,47,"ascending"],[22,95,4,56],[22,96,4,56,"default"],[22,103,4,56],[23,4,5,2],[23,8,5,6],[23,15,5,13,"values"],[23,21,5,19],[23,22,5,20,"Symbol"],[23,28,5,26],[23,29,5,27,"iterator"],[23,37,5,35],[23,38,5,36],[23,43,5,41],[23,53,5,51],[23,55,5,53],[23,61,5,59],[23,65,5,63,"TypeError"],[23,74,5,72],[23,75,5,73],[23,99,5,97],[23,100,5,98],[24,4,6,2],[24,8,6,6,"V"],[24,9,6,7],[24,12,6,10,"Array"],[24,17,6,15],[24,18,6,16,"from"],[24,22,6,20],[24,23,6,21,"values"],[24,29,6,27],[24,30,6,28],[25,4,7,2],[25,8,7,8,"R"],[25,9,7,9],[25,12,7,12],[25,16,7,16,"Float64Array"],[25,28,7,28],[25,29,7,29,"V"],[25,30,7,30],[25,31,7,31,"length"],[25,37,7,37],[25,38,7,38],[26,4,8,2],[26,8,8,6,"valueof"],[26,15,8,13],[26,16,8,14,"length"],[26,22,8,20],[26,27,8,25],[26,28,8,26],[26,30,8,28,"V"],[26,31,8,29],[26,34,8,32,"V"],[26,35,8,33],[26,36,8,34,"map"],[26,39,8,37],[26,40,8,38,"valueof"],[26,47,8,45],[26,48,8,46],[26,50,8,48,"valueof"],[26,57,8,55],[26,60,8,58,"ascending"],[26,69,8,67],[26,70,8,67,"default"],[26,77,8,67],[27,4,9,2],[27,8,9,8,"compareIndex"],[27,20,9,20],[27,23,9,23,"compareIndex"],[27,24,9,24,"i"],[27,25,9,25],[27,27,9,27,"j"],[27,28,9,28],[27,33,9,33,"valueof"],[27,40,9,40],[27,41,9,41,"V"],[27,42,9,42],[27,43,9,43,"i"],[27,44,9,44],[27,45,9,45],[27,47,9,47,"V"],[27,48,9,48],[27,49,9,49,"j"],[27,50,9,50],[27,51,9,51],[27,52,9,52],[28,4,10,2],[28,8,10,6,"k"],[28,9,10,7],[28,11,10,9,"r"],[28,12,10,10],[29,4,11,2,"values"],[29,10,11,8],[29,13,11,11,"Uint32Array"],[29,24,11,22],[29,25,11,23,"from"],[29,29,11,27],[29,30,11,28,"V"],[29,31,11,29],[29,33,11,31],[29,34,11,32,"_"],[29,35,11,33],[29,37,11,35,"i"],[29,38,11,36],[29,43,11,41,"i"],[29,44,11,42],[29,45,11,43],[30,4,12,2],[31,4,13,2,"values"],[31,10,13,8],[31,11,13,9,"sort"],[31,15,13,13],[31,16,13,14,"valueof"],[31,23,13,21],[31,28,13,26,"ascending"],[31,37,13,35],[31,38,13,35,"default"],[31,45,13,35],[31,48,13,38],[31,49,13,39,"i"],[31,50,13,40],[31,52,13,42,"j"],[31,53,13,43],[31,58,13,48],[31,62,13,48,"ascendingDefined"],[31,69,13,64],[31,70,13,64,"ascendingDefined"],[31,86,13,64],[31,88,13,65,"V"],[31,89,13,66],[31,90,13,67,"i"],[31,91,13,68],[31,92,13,69],[31,94,13,71,"V"],[31,95,13,72],[31,96,13,73,"j"],[31,97,13,74],[31,98,13,75],[31,99,13,76],[31,102,13,79],[31,106,13,79,"compareDefined"],[31,113,13,93],[31,114,13,93,"compareDefined"],[31,128,13,93],[31,130,13,94,"compareIndex"],[31,142,13,106],[31,143,13,107],[31,144,13,108],[32,4,14,2,"values"],[32,10,14,8],[32,11,14,9,"forEach"],[32,18,14,16],[32,19,14,17],[32,20,14,18,"j"],[32,21,14,19],[32,23,14,21,"i"],[32,24,14,22],[32,29,14,27],[33,6,15,6],[33,10,15,12,"c"],[33,11,15,13],[33,14,15,16,"compareIndex"],[33,26,15,28],[33,27,15,29,"j"],[33,28,15,30],[33,30,15,32,"k"],[33,31,15,33],[33,36,15,38,"undefined"],[33,45,15,47],[33,48,15,50,"j"],[33,49,15,51],[33,52,15,54,"k"],[33,53,15,55],[33,54,15,56],[34,6,16,6],[34,10,16,10,"c"],[34,11,16,11],[34,15,16,15],[34,16,16,16],[34,18,16,18],[35,8,17,8],[35,12,17,12,"k"],[35,13,17,13],[35,18,17,18,"undefined"],[35,27,17,27],[35,31,17,31,"c"],[35,32,17,32],[35,35,17,35],[35,36,17,36],[35,38,17,38,"k"],[35,39,17,39],[35,42,17,42,"j"],[35,43,17,43],[35,45,17,45,"r"],[35,46,17,46],[35,49,17,49,"i"],[35,50,17,50],[36,8,18,8,"R"],[36,9,18,9],[36,10,18,10,"j"],[36,11,18,11],[36,12,18,12],[36,15,18,15,"r"],[36,16,18,16],[37,6,19,6],[37,7,19,7],[37,13,19,13],[38,8,20,8,"R"],[38,9,20,9],[38,10,20,10,"j"],[38,11,20,11],[38,12,20,12],[38,15,20,15,"NaN"],[38,18,20,18],[39,6,21,6],[40,4,22,4],[40,5,22,5],[40,6,22,6],[41,4,23,2],[41,11,23,9,"R"],[41,12,23,10],[42,2,24,0],[43,0,24,1],[43,3]],"functionMap":{"names":["<global>","rank","compareIndex","Uint32Array.from$argument_1","<anonymous>","values.forEach$argument_0"],"mappings":"AAA;eCG;uBCK,6BD;+BEE,WF;sCGE,sCH;iBIC;KJQ;CDE"},"hasCjsExports":false},"type":"js/module"}]}